The classes in ISIC2018 are
CLASSES = ['MEL', 'NV', 'BCC', 'AKIEC', 'BKL', 'DF', 'VASC']
and I think they stand for 
    - MEL: Melanoma Invasive
    - NV: (Melanocytic) Nevus
    - BCC: Basal Cell Carcinoma
    - AKIEC: Actinic Keratoses
    - BKL: Benign Keratosis
    - DF: Dermafibroma
    - VASC: Vascular Lesions

For ISIC2024 the mappings are
Melanoma Invasive is MEL
Nevus is NEV
Basal cell Carcinoma is BCC
Squamous cell Carcinoma I don't know
Solar or Actinic Keratoses should be AKIEC
Beign cases, I am not sure, maybe BKL?
NOS stands for "Not Otherwise Specified"

Note that the task on ISIC2024 is binary classification whereas the task
on ISIC2018 is a 7-way classification.

I had previously looked a little at the ISIC2024 Kaggle page and saw it was binary classification
and thought that ISIC2018 was this as well, but it is not (which they also say in the paper).
ISIC2018 is 7-way classification of skin cancer types whereas ISIC2024 wants a probability p
of the sample being malignant (thus 1-p is the prob. for benign). This will change what head
we use in our layer I presume we need to change from 7 output channels (logits for the 7 classes) 
to 1 output channel (the prob. of malignant). So, we cannot reuse the old network, even if
we would only replace the head and keep everything else frozen, and re-train the model, it is
unclear how good this would be. Training from scratch with another head should work. But there
are three issues:
    (1): After downloading the ISIC2024 data, I noticed it is a little bit differently structured
         than the ISIC2018 data, meaning we probably have to create a new dataloader which will
         take some time.
    (2): Another issue is class imbalance. The ISIC2024 dataset has a much more imbalanced training
         set than ISIC2018 (see exact imbalance below). This is problematic since if we retrain on
         the ISIC2024 dataset, we will likely overfit to predict only benign if we don't do anything
         about it. So for this to work, we have to figure out some clever way to not just predict benigns.
    (3): For ISIC2024, there is no available ground truth data, but we need to upload a notebook running
         our model which the output a .csv file. Should not be too complicated but takes a bit of time perhaps.

In ISIC2024, on the train set, there are 401059 samples, among which
    - 400666 are benign (99.902%)
    - 393 are malignant (0.098%)
i.e., there is a huge class imbalance.

In ISIC2018, on the train set, there are 10015 samples, among which
    - 1113 are MEL
    - 6705 are NV
    - 514 are BCC
    - 327 are AKIEC
    - 1099 are BKL
    - 115 are DF
    - 142 are VASC
which surely has some class imbalance, but it is far from as drastic.

In the train set put
 - Full ISIC2018 dataset (maybe not BKL) with ISIC2024 benign samples and full data split
    -  Kim will figure out which classes to add to benign and which classes to add to
       malignant
-  Use binary classifier used to train e.g. Glaucoma for this new binary classification task.

Relabel dataset
 - Combine data splits
 - Do train and test split

Fix dataloader
 - Change some names in dataloader
 - Perhaps change some stuff

Do evaluation
 - Metrics in ISIC2018
 - Qualitative analysis of failure and additional visualization

Relabeling
Benign: BKL, DF, NV, VASC  (8061 cases) (0 label) (80.4%)
malignant: BCC, MEL, AKIEC (1954 cases) (1 label) (19.6%)

AKIEC is unclear as it ofen is classified as pre-malignant. We need to double-check this.
    - 1113 are MEL
    - 6705 are NV
    - 514 are BCC
    - 327 are AKIEC
    - 1099 are BKL
    - 115 are DF
    - 142 are VASC

ISIC2018 test set, 1512 samples
    - 171 MEL
    - 909 NV
    - 93 BCC
    - 43 AKIEC
    - 217 BKL
    - 44 DF
    - 35 VASC
giving
    - 1205 benign samples (79.7%)
    - 307 malignant samples (20.3%)

Testing on ISIC2024, to test:
    - Take 1500 benign samples and the 393 malignant samples.
giving 1893 total samples of which 79.2% benign and 20.8% are malignant.
We make this pick to make experiments easily runnable and to get the sample
distribution of malignant and benign samples as in the ISIC2018 dataset to
make the results comparable to each other.

Potentially add 10 000 extra benign samples to the ISIC2018 train samples giving
Benign: BKL, DF, NV, VASC, +10000 ISIC2024 samples  (18061 cases) (0 label) (90.2%)
malignant: BCC, MEL, AKIEC (1954 cases) (1 label) (9.8%)
